# トークテーマ機能のセットアップガイド

## 概要

この機能は、ボランティア参加の有無に関わらず、すべてのユーザーがテーマについてコメントを残せる掲示板機能です。管理者がAirtableに直接テーマを追加することで、新しいトピックを公開できます。

## Airtableのセットアップ

### 1. Topicsテーブルの作成

Airtableに「Topics」という名前の新しいテーブルを作成し、以下のフィールドを追加してください：

| フィールド名 | フィールドタイプ | 説明 | 必須 |
|------------|---------------|------|------|
| Title | Single line text | トピックのタイトル（例：「今週1番印象に残ったこと」） | ✓ |
| Description | Long text | トピックの説明（任意） | |
| IsActive | Checkbox | トピックがアクティブかどうか（チェック=アクティブ） | ✓ |
| CreatedAt | Date | 作成日時（自動設定可） | |
| UpdatedAt | Date | 更新日時（自動設定可） | |
| CommentCount | Number | コメント数（自動更新） | |

**注意**: フィールド名は大文字小文字を含めて正確に一致させる必要があります。

### 2. TopicCommentsテーブルの作成

Airtableに「TopicComments」という名前の新しいテーブルを作成し、以下のフィールドを追加してください：

| フィールド名 | フィールドタイプ | 説明 | 必須 |
|------------|---------------|------|------|
| TopicId | Single line text | トピックのID（TopicsテーブルのレコードID） | ✓ |
| Author | Single line text | コメント投稿者の名前 | ✓ |
| AuthorId | Single line text | 認証済みユーザーのID（任意） | |
| Content | Long text | コメント内容 | ✓ |
| CreatedAt | Date | 作成日時（自動設定可） | |
| Likes | Number | いいね数（デフォルト: 0） | |

**注意**: フィールド名は大文字小文字を含めて正確に一致させる必要があります。

## 使用方法

### 新しいトピックの追加

1. Airtableの「Topics」テーブルを開く
2. 新しいレコードを追加
3. 以下の情報を入力：
   - **Title**: トピックのタイトル（例：「今週1番印象に残ったこと」）
   - **Description**: トピックの説明（任意）
   - **IsActive**: チェックを入れる（アクティブにする）
   - **CreatedAt**: 現在の日時を設定
   - **UpdatedAt**: 現在の日時を設定
   - **CommentCount**: 0を設定
4. レコードを保存

### トピックの非アクティブ化

トピックへの新しいコメントを停止したい場合：
1. Airtableの「Topics」テーブルで該当トピックを開く
2. **IsActive**のチェックを外す
3. レコードを保存

これにより、そのトピックは一覧から非表示になり、新しいコメントも受け付けなくなります。

## トピックの例

以下は、トピックのタイトル例です：

- 「今週1番印象に残ったこと」
- 「あなたにとってのボランティア　単語三つで表現！」
- 「ボランティアで学んだこと」
- 「次に参加したいボランティア活動」
- 「ボランティアを通じて出会った人々」

## 機能の特徴

1. **認証不要**: ログインしていないユーザーでもコメントを投稿できます
2. **いいね機能**: 各コメントにいいねを付けることができます
3. **自動更新**: コメント数は自動的に更新されます
4. **アクティブ/非アクティブ**: 管理者がトピックの公開状態を制御できます

## トラブルシューティング

### トピックが表示されない

- **IsActive**がチェックされているか確認してください
- フィールド名が正確に一致しているか確認してください（大文字小文字を含む）

### コメントが投稿できない

- トピックの**IsActive**がチェックされているか確認してください
- AirtableのAPIキーとベースIDが正しく設定されているか確認してください

### コメント数が更新されない

- コメント投稿後、少し時間をおいてからリロードしてください
- AirtableのAPI制限に達していないか確認してください



